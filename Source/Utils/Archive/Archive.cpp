///////////////////////////////////////////////////////////////////////////////
// Dependencies
///////////////////////////////////////////////////////////////////////////////
#include "Utils/Archive/Archive.hpp"

///////////////////////////////////////////////////////////////////////////////
// Namespace UEB
///////////////////////////////////////////////////////////////////////////////
namespace UEB
{

///////////////////////////////////////////////////////////////////////////////
UArchive::UArchive(void)
    : mVersion(0)
    , mIsLoading(false)
    , mIsSaving(false)
    , mAllowSeek(false)
{}

///////////////////////////////////////////////////////////////////////////////
UArchive& UArchive::operator<<(FString& value)
{
    FUint64 length = value.length();

    *this << length;
    if (mIsLoading) {
        TUniquePtr<char[]> buffer(new char[length + 1]);
        Serialize(buffer.get(), length * sizeof(char));
        buffer[length] = '\0';
        value = FString(buffer.get(), length);
    } else {
        if (length > 0) {
            Serialize(&value[0], length * sizeof(char));
        }
    }
    return (*this);
}

///////////////////////////////////////////////////////////////////////////////
UArchive& UArchive::operator<<(ImVec2& value)
{
    *this << value.x << value.y;
    return (*this);
}

///////////////////////////////////////////////////////////////////////////////
bool UArchive::IsLoading(void) const
{
    return (mIsLoading);
}

///////////////////////////////////////////////////////////////////////////////
bool UArchive::IsSaving(void) const
{
    return (mIsSaving);
}

///////////////////////////////////////////////////////////////////////////////
bool UArchive::IsAllowingSeek(void) const
{
    return (mAllowSeek);
}

///////////////////////////////////////////////////////////////////////////////
FInt32 UArchive::GetArchiveVersion(void) const
{
    return (mVersion);
}

///////////////////////////////////////////////////////////////////////////////
void UArchive::SetArchiveVersion(FInt32 version)
{
    mVersion = version;
}

///////////////////////////////////////////////////////////////////////////////
void UArchive::Seek(FUint64 position)
{
    (void)position;
}

///////////////////////////////////////////////////////////////////////////////
FUint64 UArchive::Tell(void) const
{
    return (0);
}

///////////////////////////////////////////////////////////////////////////////
FUint64 UArchive::TotalSize(void) const
{
    return (0);
}

///////////////////////////////////////////////////////////////////////////////
void UArchive::Serialize(void* data, FUint64 length)
{
    (void)data;
    (void)length;
}

} // !namespace UEB
